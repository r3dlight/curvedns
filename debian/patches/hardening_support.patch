Description: Add support for debian hardening flags
 Update CFLAGS and LDFLAGS assignment to support integration
 of external variables.
Author: StÃ©phane Neveu
Last-Update: 2017-05-17
--- a/Makefile.in
+++ b/Makefile.in
@@ -13,8 +13,8 @@
 #EVLDFLAGS=-L$(EV)/lib
 
 CC=@CC@
-CFLAGS=@CFLAGS@ $(CDNSCFLAGS) $(EVCFLAGS)
-LDFLAGS=-L$(NACLLIB) $(EVLDFLAGS)
+CFLAGS+=@CFLAGS@ $(CDNSCFLAGS) $(EVCFLAGS) $(CPPFLAGS)
+LDFLAGS+=-L$(NACLLIB) $(EVLDFLAGS)
 
 # do not edit below
 
--- a/configure.curvedns
+++ b/configure.curvedns
@@ -20,7 +20,7 @@
 doMakefile() {
   sed -e "s/@ABI@/$abi/g" \
       -e "s/@CC@/$compiler/" \
-      -e "s/@CFLAGS@/$cflags/" \
+      -e "s/@CFLAGS@/$CFLAGS $CPPFLAGS $cflags/" \
           Makefile.in > Makefile
 }
 
